{% load i18n %}
{% load verbose_names %}

<table bordercolor="red" border="1" width="100%">
    <thead>
      <tr>
          <th>{% get_verbose_field_name task_obj "create_date" %}</th>
          <th>{% get_verbose_field_name task_obj "status" %}</th>
          <th>{% get_verbose_field_name task_obj "client" %}</th>
          <th>{% get_verbose_field_name task_obj "solves_user" %}</th>
          <th>{% get_verbose_field_name task_obj "user_solved" %}</th>
          <th>{% trans "Options" %}</th>
      </tr>
    </thead>
{% for task in tasks %}
    <tr>
        <!-- Task date -->
        <td>
            <div class="with_popup" data-title="{% trans "Number" %}: {{ task.id }}. {% trans "author" %}: {{ task.create_user.last_name }} {{ task.create_user.first_name }}">
                {{ task.create_date|date:'d M H:i' }}
            </div>
        </td>

        <!-- Status -->
        <td>
            {% if not task.is_removed %}
                <div class="crm_radio_btns">
                    <input type="radio" id="{{ type }}_radio0_{{ task.id }}" onchange='obj_switch_status( "task", {{ task.id }}, "NEW" )' name="{{ type }}_radio_{{ task.id }}" {% if task.status = "NEW" %} checked {% endif %}>
                        <label for="{{ type }}_radio0_{{ task.id }}">Новая</label>
                    <input type="radio" id="{{ type }}_radio1_{{ task.id }}" onchange='obj_switch_status( "task", {{ task.id }}, "PRG" )' name="{{ type }}_radio_{{ task.id }}" {% if task.status = "PRG" %} checked {% endif %}>
                        <label for="{{ type }}_radio1_{{ task.id }}">Работа</label>
                    <input type="radio" id="{{ type }}_radio2_{{ task.id }}" onchange='obj_switch_status( "task", {{ task.id }}, "SLD" )' name="{{ type }}_radio_{{ task.id }}" {% if task.status = "SLD" %} checked {% endif %}>
                        <label for="{{ type }}_radio2_{{ task.id }}">Закрыта</label>
                </div>
            {% else %}
                {% trans "Was deleted" %}
            {% endif %}

        <!-- Client -->
        <td>
            <div class="with_popup" data-title="{% trans "Contact" %}: {{ task.client.phone }}">
                {{ task.client.sname }}
            </div>
        </td>

        <!-- Who solving -->
        <td>
            {% if task.solves_user %}
                <div class="with_popup" data-title="{{ task.solves_user.last_name }} {{ task.solves_user.first_name }}">
                    {{ task.solves_user.last_name }} {{ task.solves_user.first_name|make_list|first }}.
                </div>
            {% endif %}
        </td>

        <!-- Who solving -->
        <td>
            {% if task.user_solved %}
                <div class="with_popup" data-title="{{ task.user_solved.last_name }} {{ task.user_solved.first_name }}">
                    {{ task.user_solved.last_name }} {{ task.user_solved.first_name|make_list|first }}.
                </div>
            {% endif %}
        </td>

        <!-- Options -->
        <td>
            <ul id="icons" class="ui-widget ui-helper-clearfix">
                {% if not task.is_removed %}
                    <li title="{% trans "Remove task" %}" onclick="Tasks.remove({{ task.id }})" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-trash"></span></li>
                {% endif %}
                {% if task.is_removed %}
                    <li title="{% trans "Restore task" %}" onclick="Tasks.restore({{ task.id }})" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-plusthick"></span></li>
                {% endif %}
                <li title="{% trans "Edit task" %}" onclick="Tasks.edit({{ task.id }})" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-wrench"></span></li>
                <li title="{% trans "Transfer task" %}" onclick="Tasks.({{ task.id }})" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-arrowthick-1-e"></span></li>
            </ul>
        </td>
    </tr>

    <!-- Comment string -->
    <tr  style="padding-bottom:50px;">
        <!-- Title of comment -->
        <td>
            {% trans "Comment" %}:
        </td>

        <!-- Comment -->
        <td colspan="5">
            {{ task.create_comment }}
        </td>

    </tr>
{% endfor %}
</table>



<!--DO NOT USE-->
<p>
           <div class="row panel" style="padding: 10px; margin: 5px;">

                <!-- 1 line -->
                    <div class="row">

                            <!--N-->
                            <div class="large-1 columns" style="background: #777">
                                Number
                            </div>

                            <!--date-->
                            <div class="large-2 columns" style="background: #fc0">
                                date
                            </div>

                            <!--author-->
                            <div class="large-5 columns" style="background: #ab4">
                                author
                            </div>

                            <!--Options-->
                            <div class="large-4 columns" style="background: #cb0">
                                Options
                            </div>

                    </div>

                <!-- 2 line -->
                    <div class="row">

                            <!--Client-->
                            <div class="large-6 columns" style="background: #999">
                                Short client name
                            </div>

                            <!--Client phone-->
                            <div class="large-6 columns" style="background: #cf0">
                                Client phone
                            </div>

                    </div>

                <!-- 3 line -->
                    <div class="row">

                            <!--Create button-->
                            <div class="large-3 columns" style="background: #ac0">
                                Comment title
                            </div>

                            <!--Priority list-->
                            <div class="large-9 columns" style="background: #fa0">
                                Comment
                            </div>

                    </div>

                <!-- 4 line -->
                    <div class="row">

                            <!--Status-->
                            <div class="large-2 columns" style="background: #bb0">
                                Status
                            </div>

                            <!--Engineer -->
                            <div class="large-4 columns" style="background: #aaa">
                                Engineer
                            </div>

                            <!--Pick date -->
                            <div class="large-3 columns" style="background: #3a5">
                                Pick date
                            </div>

                            <!--Solve date -->
                            <div class="large-3 columns" style="background: #3b5">
                                Solve date
                            </div>

                    </div>


            </div>
</p>


{%if type == "main" %}
    <div class="small-3 large-centered columns">
    <ul class="pagination">
      {% if tasks.has_previous %}
        <li class="arrow"><a href="?page={{ tasks.previous_page_number }}">&laquo;</a></li>
      {% endif %}
      <li>{% trans "Page" %} {{ tasks.number }} {% trans "in" %} {{ tasks.paginator.num_pages }}</li>
      {% if tasks.has_next %}
        <li class="arrow"><a href="?page={{ tasks.next_page_number }}">&raquo;</a></li>
      {% endif %}
    </ul>
    </div>
{% endif %}